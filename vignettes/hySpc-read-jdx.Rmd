---
# For vignette ---------------------------------------------------------------
title:       'Importing JCAMP-DX files'
description: 'Importing JCAMP-DX files into "hyperSpec".'
# Authors --------------------------------------------------------------------
author:
  - name: Sang Truong, Bryan Hanson
    email: sttruong@stanford.edu
    corresponding : yes
    affiliation   : Stanford University
# Document -------------------------------------------------------------------
date:        "`r Sys.Date()`"
output:
    bookdown::html_document2:
      base_format: rmarkdown::html_vignette
      toc: yes
      toc_depth: 2
      fig_caption: yes
      number_sections: true
      css:
        - vignette.css
        - style.css
vignette: >
    % \VignetteIndexEntry{Importing JCAMP-DX files into "hyperSpec"}
    % \VignetteKeyword{hySpc.read.jdx}
    % \VignettePackage{hySpc.read.jdx}
    % \VignetteEngine{knitr::rmarkdown}
    % \VignetteEncoding{UTF-8}
# Citations/References -------------------------------------------------------
link-citations: yes
bibliography: resources/intro-pkg.bib
biblio-style: plain
csl: elsevier-with-titles.csl
# Pkgdown --------------------------------------------------------------------
pkgdown:
  as_is: true
  set_null_theme: no
---


```{r cleanup-hyperspec, include = FALSE}
# Clean up to ensure reproducible workspace ----------------------------------
rm(list = ls(all.names = TRUE))
```

```{r setup, include = FALSE}
# Packages -------------------------------------------------------------------
library(hySpc.read.jdx)
library("knitr")

# Functions ------------------------------------------------------------------
source("vignette-functions.R", encoding = "UTF-8")

# Settings -------------------------------------------------------------------
source("vignette-default-settings.R", encoding = "UTF-8")

# Temporary options ----------------------------------------------------------
# Change the value of this option in "vignette-default-settings.R"
show_reviewers_notes = getOption("show_reviewers_notes", TRUE)
```


```{r bib, echo = FALSE, paged.print = FALSE}
dir.create("resources", showWarnings = FALSE)
knitr::write_bib(
  c("hyperSpec"),
  file = "resources/intro-pkg.bib"
)
```


<!-- This chunk inserts common info about all the vignettes -->

```{r, echo = FALSE, results = "asis"}
res <- knitr::knit_child("list-of-vignettes.md", quiet = TRUE)
cat(res, sep = '\n')
```


# Importing JCAMP-DX Files {#sec:jcamp-dx}

\index{ASCII!JCAMP-DX}
\index{JCAMP-DX!ASCII}
\index{jdx|see{JCAMP-DX}}
\index{JCAMP-DX!ASCII}

`hySpc.read.jdx` is a small package that wraps the [readJDX::readJDX()] function.  As such many different JCAMP-DX formats can be imported.  [readJDX::readJDX()] has a great deal of supporting documentation and vignettes, which you should consult for detailed information.

This example shows how to read in a JCAMP-DX file.  `read_jdx` returns a list; the first element is the file metadata, and the second element is the imported data as a `hyperSpec` object. Figure \@ref(fig:demo_read_plot) shows the imported spectrum.

```{r include=FALSE}
CAPTION = "IR spectrum of Smart Balance Original spread, a butter substitute.  "
```


```{r demo_read_plot, fig.cap = CAPTION}
sbo <- system.file("extdata", "SBO.jdx", package = "readJDX")
data <- read_jdx(sbo)
spc <- data[[2]]
plot(spc)
```

The metadata includes some fields required by the JCAMP-DX standard as well as fields supplied by the instrument vendor.

```{r metadata}
meta <- data[[1]]
head(meta, n = 40L)
```
